---
cdate: 2021-04-02 09:54:00
updated: 2021-04-02 09:54:00
typora-root-url: ..\..
---

<img src="/image-2021-04-02-09.54.31.819.png" alt="image-2021-04-02 09.54.31.819" style="zoom: 25%;" />



# 第二章 Internet 地址结构

>当一台设备连接到全球性的 Internet时,为它们分配地址就必须经过协调,这样就不会重复使用网络中的其他地址。对于专用网络,使用的IP地址必须经过协调,以避免在专用网络中出现类似的重复。成组的IP地址被分配给用户和组织。这些地址的拥有者再将它们分配给设备,这通常根据某些“编号方案”进行。对于全球性的 Internet地址,一个分层结构管理实体帮助用户和服务提供商分配地址。个人用户通常由 Internet服务提供商(ISP)分配地址,通过支付费用来获得地址和执行路由。
>
>Page: 31

<!-- more -->

## IPv6

>在IPv6中,地址的长度是128位,是IPv4地址长度的4倍。一般来说,大多数用户对它不太熟悉。IPv6地址的传统表示方法是采用称为块或字段的四个十六进制数,这些被称为块或字段的数由冒号分隔。例如,一个包含8个块的IPv6地址可写为5m05:2000:80ad:5800:0058:0800:2023:1d71。虽然不像用户熟悉的十进制数,但将十六进制数转换为二进制更容易。另外,一些已取得共识的IPv6地址简化表示法已被标准化[RFC42911]:
>1.一个块中前导的零不必书写。在前面的例子中,地址可写为5f05:200080ad:5800:58:800:2023:1d7l
>2.全零的块可以省略,并用符号::代替。例如,IPv6地址0:0:0:0:0:0:0:1可简写为::1同样,地址2001:0db8:0:0:0:0:0:2可简写为2001:db8::2。为了避免出现歧义,一个IPv6地址中符号::只能使用一次。

在某些情况下，可以使用[]来包裹IPv6，比如url:

http://[2001:0db8:85a3:08d3:1319:8a2e:0370:7344]:443/

## IPv4地址分类

在最初，IPv4被分为这5类

![image-2021-04-02-15.25.19.774](/images/image-2021-04-02-15.25.19.774.png)

20世纪90年代以后，Internet遇到了新的问题：

>1.到1994年,一半以上的B类地址已被分配。预计,B类地址空间大约在1995年将被用尽。
>
>2.32位的IPv4地址被认为不足以应付 Internet在21世纪初的预期规模。
>
>3.全球性路由表的条目数(每个网络号对应一条),1995年大约为65000个条目,目前仍在增长中。随着越来越多A类、B类和C类路由条目的出现,路由性能将受到影响。
>
>Page: 46

## CIDR

无类别域间路由，使用CIDR，任何位定义的地址范围都可以作为一个类的一部分，但是需要提供子网掩码（IP前缀长度）

![image-2021-04-02-15.42.14.432](/images/image-2021-04-02-15.42.14.432.png)

无类别域间路由解决了问题1，IPv6解决了问题2，问题3没办法了。

## 聚合

Kleinrock和Kamoun提出使用分层路由，树形拓扑网络

如果我们按照地址对IP进行聚合，就能让路由表中的条目变少，下图左中的路由表有9个条目，右中的路由器只有三个条目且不随树的生长变化。

![image-2021-04-02-15.48.40.652](/images/image-2021-04-02-15.48.40.652.png)

## 特殊用途的地址

![image-2021-04-02 15.53.58.647](/images/image-2021-04-02 15.53.58.647.png)



![image-2021-04-02-15.56.20.879](/images/image-2021-04-02-15.56.20.879.png)



